(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{22:function(e,t,n){e.exports=n(34)},23:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);n(23);var a=n(0),r=n.n(a),o=n(19),c=n.n(o),i=n(5),l=n(6),s=n(8),u=n(7),m=n(9),d=n(10),h=r.a.createContext({name:"",myPet:{},setName:function(){}}),g=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={redirect:!1},n.toggleRedirect=function(){n.setState({redirect:!0})},n.handleSubmit=function(e){e.preventDefault(),n.toggleRedirect()},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(d.a,{to:"/adopt"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Petful"),r.a.createElement("p",null,"Welcome to our adorable adoption adventure! We are excited for you to add a new fluffy member to your family!"),r.a.createElement("p",null,"Here are the rules for our adoption process:"),r.a.createElement("ol",null,r.a.createElement("li",null,"You may select from either a dog or a cat"),r.a.createElement("li",null,"We run strictly on a First In, First Out basis. So you may only select the first cat or the first dog in line"),r.a.createElement("li",null,"We also operate on a queue based system for saving your spot in line."),r.a.createElement("li",null,"If you refresh this page, you will lose your spot in line and will have to start the adoption process over again.")),r.a.createElement("p",null,"Whenever you are ready, enter your name down below, and get ready to hop in line!"),r.a.createElement("form",{id:"name_form",onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"name_field"},"Name: "),r.a.createElement("input",{type:"text",name:"name_box",value:this.context.name,id:"name_box",onChange:function(t){return e.context.setName(t)},placeholder:"e.g. Jane Doe"}),r.a.createElement("button",{type:"submit",id:"submit_button"},"Begin!")))}}]),t}(r.a.Component);g.contextType=h;n(33);var f=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).renderLoading=function(){return r.a.createElement("div",{id:"loading_section"},r.a.createElement("p",{id:"loading_message"},"Loading... please wait"))},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"loading_section"},r.a.createElement("p",{id:"loading_message"},"Loading... please wait"))}}]),t}(r.a.Component);f.contextType=h;var p="https://peftulserver.herokuapp.com/api",E={getCat:function(){return fetch("".concat(p,"/pets/cat")).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},getDog:function(){return fetch("".concat(p,"/pets/dog")).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},getLine:function(){return fetch("".concat(p,"/people")).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},removeCat:function(){return fetch("".concat(p,"/pets/cat"),{method:"DELETE"}).then((function(e){return e.ok?0:e.json().then((function(e){return Promise.reject(e)}))}))},removeDog:function(){return fetch("".concat(p,"/pets/dog"),{method:"DELETE"}).then((function(e){return e.ok?0:e.json().then((function(e){return Promise.reject(e)}))}))}},y=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={redirect:!1,myTurn:!1,isLoading:!1,error:null,queue:["John","Jane","Billy"],currentCat:{},currentDog:{}},n.adoptCat=function(){var e=n.state.queue;e.shift(),E.removeCat().then((function(){return E.getCat()})).then((function(t){console.log(t),n.setState({currentCat:t,queue:e})}))},n.adoptDog=function(){var e=n.state.queue;e.shift(),E.removeDog().then((function(){return E.getDog()})).then(n.setDog),n.setState({queue:e})},n.setCat=function(e){n.setState({currentCat:e})},n.setDog=function(e){n.setState({currentDog:e,isLoading:!1})},n.setLine=function(e){e.includes(n.context.name)||e.push(n.context.name),n.setState({queue:e})},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.state.queue[0]!==e.context.name?1===Math.floor(2*Math.random())?e.adoptDog():e.adoptCat():e.setState({myTurn:!0})}),5e3),this.setState({isLoading:!0}),E.getCat().then(this.setCat).then(E.getDog).then(this.setDog).then(E.getLine).then(this.setLine).catch((function(t){return e.setState({error:t})}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return""===this.context.name?r.a.createElement(d.a,{to:"/"}):(console.log(this.state.queue),r.a.createElement("div",{className:"Adoption_component"},r.a.createElement("h1",{id:"current_pets"},"Current Pets"),this.state.isLoading&&r.a.createElement(f,null),r.a.createElement("section",{id:"adoption_box"},r.a.createElement("section",{id:"pets_box"},r.a.createElement("section",{id:"cat_box"},r.a.createElement("ul",{id:"cat_info_list"},r.a.createElement("li",{className:"cat_info"},r.a.createElement("img",{id:"cat_img",src:this.state.currentCat.imageURL,alt:this.state.description})),r.a.createElement("li",{className:"cat_info",id:"cat_name"},r.a.createElement("strong",null,"Name:")," ",this.state.currentCat.name),r.a.createElement("li",{className:"cat_info",id:"cat_gender"},r.a.createElement("strong",null,"Gender: ")," ",this.state.currentCat.gender),r.a.createElement("li",{className:"cat_info",id:"cat_age"},r.a.createElement("strong",null,"Age: ")," ",this.state.currentCat.age),r.a.createElement("li",{className:"cat_info",id:"cat_breed"},r.a.createElement("strong",null,"Breed: ")," ",this.state.currentCat.breed),r.a.createElement("li",{className:"cat_info",id:"cat_age"},r.a.createElement("strong",null,this.state.currentCat.name,"'s story: ")," ",this.state.currentCat.story)),this.state.myTurn?r.a.createElement("button",{onClick:this.adoptCat},"Adopt"):""),r.a.createElement("section",{id:"dog_box"},r.a.createElement("ul",{id:"dog_info_list"},r.a.createElement("li",{className:"dog_info"},r.a.createElement("img",{id:"dog_img",src:this.state.currentDog.imageURL,alt:this.state.description})),r.a.createElement("li",{className:"dog_info",id:"dog_name"},r.a.createElement("strong",null,"Name:")," ",this.state.currentDog.name),r.a.createElement("li",{className:"dog_info",id:"dog_gender"},r.a.createElement("strong",null,"Gender: ")," ",this.state.currentDog.gender),r.a.createElement("li",{className:"dog_info",id:"dog_age"},r.a.createElement("strong",null,"Age: ")," ",this.state.currentDog.age),r.a.createElement("li",{className:"dog_info",id:"dog_breed"},r.a.createElement("strong",null,"Breed: ")," ",this.state.currentDog.breed),r.a.createElement("li",{className:"dog_info",id:"dog_age"},r.a.createElement("strong",null,this.state.currentDog.name,"'s story: ")," ",this.state.currentDog.story)),this.state.myTurn?r.a.createElement("button",{onClick:this.adoptDog},"Adopt"):""))),r.a.createElement("h1",{id:"queue_header"},"Current queue "),r.a.createElement("section",{className:"queue_box"},r.a.createElement("ul",{className:"queue_list"},this.state.myTurn?r.a.createElement("p",null,"It's your turn! Select your new pet."):this.state.queue.map((function(e){return r.a.createElement("li",{className:"person_in_line"},e)}))))))}}]),t}(r.a.Component);y.contextType=h;var b=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",myPet:{}},n.setName=function(e){n.setState({name:e.target.value})},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e={name:this.state.name,myPet:this.state.myPet,setName:this.setName};return r.a.createElement("div",{className:"App"},r.a.createElement(h.Provider,{value:e},r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:g}),r.a.createElement(d.b,{exact:!0,path:"/adopt",component:y}))))}}]),t}(a.Component),_=n(12);c.a.render(r.a.createElement(_.a,null,r.a.createElement(b,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.d80d3280.chunk.js.map